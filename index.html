<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Comfort Envelope</title>
  <link rel="icon" type="image/x-icon" href="public/images/letter-sealed-with-a-heart-svgrepo-com.svg" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
    <div class="music-toggle">
    <button id="music-btn">üéµ</button>
    </div>

    <!-- Music Player Sidebar -->
    <div id="music-player" class="music-player">
    <div class="music-header">
        <h3 id="song-title">Now Playing</h3>
    </div>
    <div class="controls">
        <button id="prev-btn">‚èÆ</button>
        <button id="play-pause-btn">‚ñ∂</button>
        <button id="next-btn">‚è≠</button>
    </div>
    </div>

    <!-- Background music -->
    <audio id="bg-music"></audio>

    <div class="container">
        <h1 class="title">My Comfort Envelope<h1>
        <div class="envelope-wrapper">
            <div class="envelope">
                <div class="letter">
                    <div class="text">
                        <strong>Dear Babi,</strong>
                        <p>

                        </p>
                    </div>
                </div>
            </div>
            <div class="heart"></div>

            <!-- Floating hearts container -->
            <div class="floating-hearts"></div>
        </div>
    </div>

<script>
    const envelope = document.querySelector('.envelope-wrapper');
    const floatingHearts = document.querySelector('.floating-hearts');
    const letterMessage = document.querySelector('.text p');

    // Messages for the letter
    const messages = [
        "You deserve to know that you make my heart smile everyday ‚ù§Ô∏è",
        "Thank you for always being there for me - I love you always! üíï",
        "Kung ang english ng sibuyas ay onion, bakit yung height mo pang minions? üòÇ",
        "You‚Äôre my sunshine during the rainy days ‚òÄÔ∏è",
        "Forever and always, it‚Äôs you üíñ",
        "My world is better with you in it üåéüíû",
        "You‚Äôre the reason I believe in love ‚ú®",
        "No distance can keep us apart üíå",
        "With you, everything feels great üíù",
        "Mahal na mahal kita, sobra! üíû",
        "Binibini, bakit kay ganda mo? üíñ",
        "Alam mo ba? Palagi mo na lang pinapatibok itong puso kong sabik na sabik sa pagmamahal mo. ‚ù§Ô∏è",
        "Miss na kita, dito ka na sa mga yakap ko. ü§ó",
        "Palaging mong isipin na andito lang ako para sayo. üíì",
        "Salamat sa iyong pagmamahal. ü©∑",
        "I wouldn't even trade our love for anything! üíû",
        "It feels like haven knowing that I have a great partner like you by my side. üíù",
        "Thank you for always being patient with me. üíñ",
        "Everyone who truly knows you including myself sees you as a great person! üíñ",
        "Alam kong kaya mong lampasan ang lahat ng pagsubok na darating sa iyo. Kaya palagi mo lang ipagdasal. üôè‚ù§Ô∏è",
        "You're absolutely smoking hot baby! üî•‚ù§Ô∏è",
        "Please, I want you to always rely on me whenever you need someone to lean on. üíû",
        "Gosh! I want to always spoil you with my hugs and kisses. ü§óüòò",
        "Keep it up baby! You are almost there! ‚ù§Ô∏èüíû",
        "Thank you for always working hard. I love you! üíû",
        "I miss kissing you and cuddling you every night. üíû",
        "Ikakagalit ba ng magic sarap kung ang tunay na sarap ay sakin mo lang malalasap? üòã",
        "Hindi naman ako allergic sayo, pero bakit kapag lumalapit ka sa akin namumula ako? ü•µ",
        "Anak ka lang ng mama mo. Pero palagi mong i-isipin na baby kita! ‚ù§Ô∏è",
        "Kung ang rock nga ay bato, I miss you na baby ko. ‚ù§Ô∏è",
        "Ikakagalit ba ng multo kung mas takot akong mawala ka? üëª‚ù§Ô∏è",
        "Palagi kitang pipiliin sa araw-araw. ‚ù§Ô∏è",
        "Puppy love, yan yung panahong nainlove ka sa mukhang aso. üê∂",
        "Ballpen nga kinakagat ko, labi mo pa kaya. üñäÔ∏è‚ù§Ô∏è",
        "Panatang makabayan, ini-ibig ko ang isa diyan. Yieeee! üñêÔ∏è‚ù§Ô∏è",
        "Kapag umutot ako sa harapan mo, it means fart kana ng life ko. üçëüí®",
        "Aminado akong tamad, pero babangon ako para sa'yo. Yieeee! ü´∞",
        "Walang mahirap na daan basta ikaw ang pupuntahan! ‚ù§Ô∏è",
        "Crush pa lang kita, super loyal na ako sa'yo. ‚ù§Ô∏è",
        "'Di bagay sa'yo ang pagse'self-love kailangan mo talaga ng pagmamahal ko. ü´∞üíû",
        "Pag ako naging asawa mo 'di kita pa-paulamin ng asin hangga't may asuka pa tayo. ü§óüíû",
        "Ingatan mo'ko, mahirap nang makapaghanap ng kagaya kong TDH - Tol, Dark, and Hello. üòÇüíû",
        "Yung pandak pero pa-laban ka. Yieee. Kung Fu Pandak! üêºüíû",
        "Akala ko dagat lang ang lumalalim pati pala yung pagmamahal ko sayo. ü´∞üíû",
        "Wala nga akong pampalit ng profile, pampalit pa kaya sayo? Hays. ü§¶ü©∑",
        "I want lambing. Chat mo'ko pag free ka ah? I love you. ü©∑",
        "Sabi ng iba, kadalasan daw sa mga magaganda ay mainitin ang ulo. Kaya pala palagi kang galit sako babi. üôà‚ù§Ô∏è",
        "Hapdi ng mata ko, kailangan na ata kitang makita eih. üôà‚ù§Ô∏è",
        "Makita lang kita, kompleto na ang buhay ko. üíñ",
        "Kinulang ka man sa height, pero na sobrahan naman sa ganda. Okay na yan bab. Hehe. üî•ü©∑",
    ];

    // Working copy of shuffled messages
    let messageQueue = [];

    // Fisher-Yates shuffle
    function shuffleArray(array) {
        const arr = [...array];
        for (let i = arr.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
    }

    // Get next message, reshuffle when empty
    function getNextMessage() {
        if (messageQueue.length === 0) {
            messageQueue = shuffleArray(messages);
        }
        return messageQueue.pop();
    }

    // Toggle envelope open/close
    envelope.addEventListener('click', () => {
        envelope.classList.toggle('flap');

        if (envelope.classList.contains('flap')) {
            // Show next unique message
            letterMessage.textContent = getNextMessage();

            startFloatingHearts();
        } else {
            stopFloatingHearts();
        }
    });

    function startFloatingHearts() {
        heartInterval = setInterval(() => {
            const heart = document.createElement('span');
            heart.textContent = '‚ù§';
            heart.style.left = Math.random() * 100 + 'px';
            heart.style.fontSize = Math.random() * 10 + 14 + 'px';
            floatingHearts.appendChild(heart);

            // Remove after animation ends
            setTimeout(() => heart.remove(), 3000);
        }, 500); // spawn every 0.5s
    }

    function stopFloatingHearts() {
        clearInterval(heartInterval);
        floatingHearts.innerHTML = ''; // clear remaining hearts
    }
</script>

<script>
    const musicBtn = document.getElementById('music-btn');
    const musicPlayer = document.getElementById('music-player');
    const playPauseBtn = document.getElementById('play-pause-btn');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const songTitle = document.getElementById('song-title');
    const bgMusic = document.getElementById('bg-music');

    // üéµ Playlist
    const songs = [
        "public/audios/Cup of Joe - Ikaw Pa Rin Ang Pipiliin Ko.mp3",
        "public/audios/Cup of Joe - Patutunguhan.mp3",
        "public/audios/Cup of Joe, Janine Te√±oso - Tingin.mp3",
        "public/audios/Cup of Joe - Sandali.mp3",
        "public/audios/Cup of Joe - Multo.mp3",
        "public/audios/Cup of Joe - Estranghero.mp3",
        "public/audios/Cup of Joe - Sagada.mp3",
        "public/audios/Cup of Joe - Misteryoso.mp3"
    ];

    let currentSongIndex = Math.floor(Math.random() * songs.length);
    bgMusic.src = songs[currentSongIndex];
    songTitle.textContent = songs[currentSongIndex].split("/").pop();

    // Toggle sidebar with same button
    musicBtn.addEventListener('click', () => {
    musicPlayer.classList.toggle('open');
    });

    // Play / Pause
    playPauseBtn.addEventListener('click', () => {
    if (bgMusic.paused) {
        bgMusic.play();
        playPauseBtn.textContent = "‚è∏";
    } else {
        bgMusic.pause();
        playPauseBtn.textContent = "‚ñ∂";
    }
    });

    // Next song
    nextBtn.addEventListener('click', () => {
    currentSongIndex = (currentSongIndex + 1) % songs.length;
    loadSong();
    });

    // Previous song
    prevBtn.addEventListener('click', () => {
    currentSongIndex = (currentSongIndex - 1 + songs.length) % songs.length;
    loadSong();
    });

    // Load song
    function loadSong() {
    bgMusic.src = songs[currentSongIndex];
    songTitle.textContent = songs[currentSongIndex].split("/").pop();
    bgMusic.play();
    playPauseBtn.textContent = "‚è∏";
    }

    // Auto-play next song when current ends
    bgMusic.addEventListener('ended', () => {
    currentSongIndex = (currentSongIndex + 1) % songs.length;
    loadSong();
    });
</script>

</body>
</html>
