<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Comfort Envelope</title>
  <link rel="icon" type="image/x-icon" href="public/images/love-message-open-envelope-svgrepo-com.svg" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
     <div class="music-toggle">
        <button id="music-btn">ðŸ”Š</button>
    </div>

    <div class="container">
        <h1 class="title">My Comfort Envelope<h1>
        <div class="envelope-wrapper">
            <div class="envelope">
                <div class="letter">
                    <div class="text">
                        <strong>Dear Babi,</strong>
                        <p>

                        </p>
                    </div>
                </div>
            </div>
            <div class="heart"></div>

            <!-- Floating hearts container -->
            <div class="floating-hearts"></div>
        </div>
    </div>

     <!-- Background music -->
    <audio id="bg-music" loop>
        <source src="public/audios/Ikaw Pa Rin Ang Pipiliin Ko - Cup of Joe .mp3" type="audio/mpeg" />
        Your browser does not support the audio element.
    </audio>

<script>
    const envelope = document.querySelector('.envelope-wrapper');
    const floatingHearts = document.querySelector('.floating-hearts');
    const letterMessage = document.querySelector('.text p');
    const musicBtn = document.getElementById('music-btn');
    const bgMusic = document.getElementById('bg-music');

    let heartInterval;

    // ðŸŽµ Playlist of songs
    const songs = [
        "public/audios/Cup of Joe - Patutunguhan.mp3",
        "public/audios/Cup of Joe, Janine TeÃ±oso - Tingin.mp3",
        "public/audios/Ikaw Pa Rin Ang Pipiliin Ko - Cup of Joe .mp3",
        "public/audios/dwta - Padaba Taka.mp3",
        "public/audios/Dionela - Musika",
        "public/audios/Dionela - Sining ft.Jay R"
    ];

    // ðŸŽµ Pick a random song on load
    function getRandomSong() {
        const index = Math.floor(Math.random() * songs.length);
        return songs[index];
    }

    // Set initial song
    bgMusic.src = getRandomSong();
    bgMusic.volume = 0.5;

    // Try autoplay (some browsers need interaction first)
    bgMusic.play().catch(() => {
        console.log("Autoplay blocked until user clicks.");
    });

     // ðŸŽµ Toggle music
    musicBtn.addEventListener('click', () => {
        if (bgMusic.paused) {
            bgMusic.play();
            musicBtn.textContent = "ðŸ”Š";
        } else {
            bgMusic.pause();
            musicBtn.textContent = "ðŸ”‡";
        }
    });

    // Messages for the letter
    const messages = [
        "You make my heart smile everyday â¤ï¸",
        "Thank you for always being there for me. ðŸ’•",
        "I love you so munch! ðŸ’•",
        "Youâ€™re my sunshine during rainy days â˜€ï¸",
        "Forever and always, itâ€™s you ðŸ’–",
        "My world is better with you in it ðŸŒŽðŸ’ž",
        "Youâ€™re the reason I believe in love âœ¨",
        "No distance can keep us apart ðŸ’Œ",
        "With you, everything feels great ðŸ’",
        "Mahal na mahal kita, sobra! ðŸ’ž",
        "Bakit ang kay ganda mo? ðŸ’–",
        "Palagi mo na lang pinapatibok itong puso kong sabik na sabik sa pagmamahal mo. â¤ï¸",
        "Miss na kita, dito ka na sa mga yakap ko. ðŸ¤—",
        "Nandito lang ako palagi sayo. ðŸ’“",
        "Salamat sa pagmamahal mo. ðŸ©·",
        "I wouldn't even trade our love for anything! ðŸ’ž",
        "It feels like haven knowing that I have a great partner by my side. ðŸ’",
        "Thank you for being patience with me. ðŸ’–",
        "Everyone who truly knows you including myself sees you as a great person! ðŸ’–",
        "Alam kong kaya mong lampasan ang lahat ng pagsubok na dadating sa iyo! Kaya palagi ka lang mag dasal. ðŸ™â¤ï¸",
        "You're absolutely smoking hot baby! ðŸ”¥â¤ï¸",
        "Please, I want you to always rely on me whenever you need someone to lean on. ðŸ’ž",
        "Damn! I want to always spoil you with my hugs and kisses. ðŸ¤—ðŸ˜˜",
        "Keep it up baby! You are almost there! â¤ï¸ðŸ’ž",
        "Thank you for always working hard. I love you! ðŸ’ž",
    ];

    // Working copy of shuffled messages
    let messageQueue = [];

    // Fisher-Yates shuffle
    function shuffleArray(array) {
        const arr = [...array];
        for (let i = arr.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [arr[i], arr[j]] = [arr[j], arr[i]];
        }
        return arr;
    }

    // Get next message, reshuffle when empty
    function getNextMessage() {
        if (messageQueue.length === 0) {
            messageQueue = shuffleArray(messages);
        }
        return messageQueue.pop();
    }

    // Toggle envelope open/close
    envelope.addEventListener('click', () => {
        envelope.classList.toggle('flap');

        if (envelope.classList.contains('flap')) {
            // Show next unique message
            letterMessage.textContent = getNextMessage();

            startFloatingHearts();
        } else {
            stopFloatingHearts();
        }
    });

    function startFloatingHearts() {
        heartInterval = setInterval(() => {
            const heart = document.createElement('span');
            heart.textContent = 'â¤';
            heart.style.left = Math.random() * 100 + 'px';
            heart.style.fontSize = Math.random() * 10 + 14 + 'px';
            floatingHearts.appendChild(heart);

            // Remove after animation ends
            setTimeout(() => heart.remove(), 3000);
        }, 500); // spawn every 0.5s
    }

    function stopFloatingHearts() {
        clearInterval(heartInterval);
        floatingHearts.innerHTML = ''; // clear remaining hearts
    }
</script>

</body>
</html>
